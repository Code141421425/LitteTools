#:include LogUI.kv
#:include PT.kv

<BackgroundColor@Widget>
    background_color: 1, 1, 0, 0.5
    canvas.before:
        Color:
            rgba: root.background_color
        Rectangle:
            size: self.size
            pos: self.pos

<BackgroundLabel@Label+BackgroundColor>
    background_color: 0.3, 0.6, 0.6, 1

<UIController>
    BoxLayout:
        orientation:'vertical'
        padding:8

        PointUnit
            id:user1
            size_hint_y:.4
        PointUnit    
            id:user2
            size_hint_y:.4
        LogUI:            
            id:logUI
            padding:5
            size_hint_y:.25



<PointUnit>

    __safe_id: [dropdown.__self__]

    BoxLayout:
        orientation:'horizontal'
        BackgroundLabel:
            text:root.userName
            id:userName
            background_color:root.backColor
            size_hint_x:.1

        BoxLayout:
            orientation:"vertical"
            size_hint_x:.2
            # Part: Point

            BackgroundLabel:
                text:"Hold Point"
                background_color:root.backColor
                size_hint_y:.15

            Label:
                text:root.point
                size_hint_y:.85
                id:point           

            BackgroundLabel:
                text:"Grand Total Point"                
                background_color:(.2,.2,.2,1)
                size_hint_y:.15

            Label:
                text:root.totalPoint
                size_hint_y:.15
                id:point           



        BoxLayout:
            # Partï¼šRule & Cost & PT 
            # Right Section
            orientation:'vertical'
            size_hint_x:.5
            padding:5

            BoxLayout:
                # Rule part & button
                orientation:'horizontal'
                size_hint_y:0.7

                BoxLayout:
                    # Rule & Cost
                    orientation:"vertical"

                    BoxLayout:
                        # rule
                        orientation:'vertical'
                        size_hint_y:.3
                        
                        Label:
                            text:"Rule"
                            text_size:self.size
                            halign: 'left'
                            size_hint_y:.1
                            # height:20
                            
                        Button:
                            id:dropdown_mainBtn
                            text:root.selectedRule
                            # height:20
                            size_hint_y:.1
                            on_press:root.refresh_DropDownList()
                            on_release:dropdown.open(self)
                                
                            Widget:
                                on_parent:dropdown.dismiss()

                            DropDown:
                                id:dropdown
                                on_select:root.handle_DropDownSelect()
                
                    BoxLayout:                    
                        # factor & workminute
                        orientation:'horizontal'
                        size_hint_y:.4

                        BoxLayout:
                            # Factor 
                            orientation:'vertical'
                            size_hint_x:.2
                            padding:3

                            Label:
                                text:"Factor"
                                text_size:self.size
                                halign: 'left'
                            
                            TextInput:
                                text:root.factor
                                id:factor_input
                                multiline:False
                                height:32

                        BoxLayout:
                            # WorkMinute 
                            orientation:'vertical'
                            size_hint_x:.2
                            padding:3

                            Label:
                                text:"WorkMinute"
                                text_size:self.size
                                halign: 'left'

                            BoxLayout:
                            # WorkMinute 
                                orientation:'horizontal'                

                                TextInput:
                                    size_hint_x:.6
                                    text:root.workMinute
                                    id:mintue_input
                                    multiline:False
                                    height:32

                                Button:
                                    size_hint_x:.2
                                    text:"30"
                                    on_release:root.WorkTime_To(30)

                                Button:
                                    size_hint_x:.2
                                    text:"60"
                                    on_release:root.WorkTime_To(60)



                    BoxLayout:
                        # costPart
                        orientation:"vertical"
                        size_hint_y:.6

                        Label:            
                            text:"Cost"
                            text_size:self.size
                            halign: 'left'
                            size_hint_y:.15

                        BoxLayout:                    
                        # Cost
                            orientation:'horizontal'
                            size_hint_y:.45

                            BoxLayout:
                                # CostAmount 
                                orientation:'vertical'
                                size_hint_x:.35
                                # size_hint_y:.7
                                padding:3

                                Label:
                                    text:"CostAmount"
                                    text_size:self.size
                                    halign: 'left'
                                    font_size:12
                                
                                TextInput:
                                    text:root.workMinute
                                    id:costAmount_input
                                    multiline:False
                                    height:32

                            BoxLayout:
                                # Case 
                                orientation:'vertical'
                                size_hint_x:.65
                                padding:3

                                Label:
                                    text:"Case"
                                    text_size:self.size                                    
                                    halign: 'left'
                                
                                TextInput:
                                    text:root.factor
                                    id:case_input
                                    multiline:False
                                    height:32

                    PT:
                        id:pt
                        size_hint_y:0.6

        
        BoxLayout:
            # Part:Button
            orientation:"vertical"
            size_hint_x:.12
            padding:8
                
            Button:
                text:"Add Pt" 
                valign:"middle" 
                size:self.size
                on_release:app.RawDataToCalculate(root)             

            Button:
                text:"Cost Pt" 
                valign:"middle" 
                size:self.size
                on_release:app.RawDataToCost(root)                     